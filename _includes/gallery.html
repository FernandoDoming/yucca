<div id="gallery" class="section">
  <h3>Gallery</h3>
  <div class="gallery">
    {% for item in site.gallery %}
      <div class="category-container">
        <h4 class="category">{{ item.category }}</h4>
        <hr>
        <div class="row">
          {% for img in item.images %}
            {% include image.html img=img %}
          {% endfor %}
        </div> <!-- /.row -->
      </div> <!-- /.category-container -->
    {% endfor %}
  </div>
</div>

<script>
  $container = $('.gallery .row');
  $container.imagesLoaded(function () {
    $container.masonry({
      itemSelector: 'figure'
    });
  });

  $container.find('figure').on('click', function () {
    $(this).addClass('open');
  });

  $(document).on('click', 'figure.open .close', function () {
    $(this).parent('figure.open').removeClass('open');
  });
</script>
